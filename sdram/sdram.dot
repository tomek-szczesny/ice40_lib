digraph {
//	newrank=true;

	{rank="source";	<FIFO\ncmd>; <FIFO\ndata_out>; <FIFO\ndata_in>}
	{rank="same"; <seq>}
	{rank="sink"; <Pins\naddr>; <Pins\ncmd>; <Pins\nD0-D7>}

	subgraph cluster_port {
	label="Input port - one of many";
		graph[style=dotted];
		<FIFO\ndata in/out>
		<Reg\ncmd>
	}
	<FIFO\ndata in/out><Round-Robin\nPort Selector>

	<FIFO\ncmd> -> <seq> [label="cmd,\nstatus[0]"]
	<seq> -> <FIFO\ncmd> [label="~stop"]

	<seq> -> <addr/cfg\nmux> [label="cfg"]
	<addr/cfg\nmux> -> <Pins\naddr> [label="addr_cfg"; style="bold"]
	<FIFO\ncmd> -> <addr/cfg\nmux> [label="addr"; style="bold"]
	

	<IO logic> -> <Pins\ncmd>
	<IO logic> -> <FIFO\ndata_out> -> <Pins\nD0-D7> -> <FIFO\ndata_in>
	<IO logic> -> <FIFO\ndata_in>
}
